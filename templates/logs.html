{% extends "base.html" %}

{% block title %}Страница логов{% endblock %}

{% block hero_title %}Логи выполнения программы{% endblock %}
{% block hero_description %}Детальная информация о процессе обработки данных{% endblock %}

{% block content %}
<div class="main__container">
    <div class="main__content">
        <div class="main__header">
            <h1 class="main__title">Журнал выполнения</h1>
            <p class="main__description">Сессия: Обработка данных от 15.01.2024</p>
        </div>
        
         <div class="filter">
            <div class="filter__controls">
                <div class="filter__group">
                    <span class="filter__label">Уровень:</span>
                    <div class="filter__buttons">
                        <button class="filter__button filter__button--active" data-level="all">Все</button>
                        <button class="filter__button" data-level="info">INFO</button>
                        <button class="filter__button" data-level="warning">WARNING</button>
                        <button class="filter__button" data-level="error">ERROR</button>
                        <button class="filter__button" data-level="debug">DEBUG</button>
                    </div>
                </div>
                
                <div class="filter__group">
                    <div class="filter__search-wrapper">
                        <input type="text" class="filter__search" id="searchLogs" placeholder="Поиск в логах...">
                    </div>
                </div>
                
                <div class="filter__group">
                    <label class="filter__checkbox-label">
                        <input type="checkbox" class="filter__checkbox" id="autoScroll" checked>
                        <span class="filter__checkbox-custom"></span>
                        <span class="filter__checkbox-text">Автопрокрутка</span>
                    </label>
                </div>
            </div>
            
            <div class="filter__actions">
                <button class="button button--secondary" id="clearLogsBtn">Очистить логи</button>
                <button class="button button--primary" id="exportLogsBtn">Экспорт логов</button>
            </div>
        </div>
        
        <section class="main__section">
            <div class="content-panel content-panel--dark">
                <div class="content-panel__list" id="logsContent">
                    <!-- logs was added here -->
                </div>
            </div>
        </section>

        <section class="main__section">
            <div class="grid grid--four">
                <div class="card card--metric">
                    <div class="card__content">
                        <div class="card__label card__label--green card__label--xlarge" id="infoCount">0</div>
                        <div class="card__description">INFO сообщений</div>
                    </div>
                </div>
                <div class="card card--metric">
                    <div class="card__content">
                        <div class="card__label card__label--orange card__label--xlarge" id="warningCount">0</div>
                        <div class="card__description">WARNING сообщений</div>
                    </div>
                </div>
                <div class="card card--metric">
                    <div class="card__content">
                        <div class="card__label card__label--red card__label--xlarge" id="errorCount">0</div>
                        <div class="card__description">ERROR сообщений</div>
                    </div>
                </div>
                <div class="card card--metric">
                    <div class="card__content">
                        <div class="card__label card__label--slate card__label--xlarge" id="debugCount">0</div>
                        <div class="card__description">DEBUG сообщений</div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- Instructions -->
    <div class="main__content">
        <h3 class="main__section-title">Справочная информация</h3>
        <div class="grid grid--two">
            <div class="card card--plain">
                <h4 class="card__title card__title--small">Уровни логов</h4>
                <ul class="card__list card__list--marked">
                    <li class="card__item">
                        <strong class="card__label">INFO</strong> - Информационные сообщения о ходе выполнения
                    </li>
                    <li class="card__item">
                        <strong class="card__label">WARNING</strong> - Предупреждения о потенциальных проблемах
                    </li>
                    <li class="card__item">
                        <strong class="card__label">ERROR</strong> - Критические ошибки выполнения
                    </li>
                    <li class="card__item">
                        <strong class="card__label">DEBUG</strong> - Отладочная информация для разработчиков
                    </li>
                </ul>
            </div>
            <div class="card card--plain">
                <h4 class="card__title card__title--small">Функции</h4>
                <ul class="card__list">
                    <li class="card__item">Фильтрация логов по уровню важности</li>
                    <li class="card__item">Поиск по содержимому логов</li>
                    <li class="card__item">Автоматическая прокрутка к новым сообщениям</li>
                    <li class="card__item">Экспорт логов в формате TXT или JSON</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='filter/filter.js') }}"></script>
    <script>
        function testAddLog() {
            if (window.filterManager) {
                const levels = ['info', 'warning', 'error', 'debug'];
                const messages = [
                    'Новое тестовое сообщение',
                    'Обработка данных завершена',
                    'Обнаружена неисправность',
                    'Отладочная информация'
                ];
                
                const randomLevel = levels[Math.floor(Math.random() * levels.length)];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                
                window.filterManager.addLog(randomLevel, randomMessage);
            }
        }
    </script>
{% endblock %}

{% block extra_css %}
{% endblock %}
