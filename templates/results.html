{% extends "base.html" %}

{% block title %}–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤{% endblock %}

{% block hero_title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è{% endblock %}
{% block hero_description %}–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏{% endblock %}

{% block content %}
<section class="features">
    <div class="container">
        <div class="results-container">
            <div class="results-header">
                <h2>Run-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏</h2>
                <div style="display: flex; gap: 1rem;">
                    <button class="btn" id="refreshBtn">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn btn-secondary" id="cleanupBtn">–û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ</button>
                </div>
            </div>
            
            <div class="results-controls">
                <div class="view-controls">
                    <button class="view-btn active" data-view="grid">
                        <span>üìä</span> –°–µ—Ç–∫–∞
                    </button>
                    <button class="view-btn" data-view="list">
                        <span>üìù</span> –°–ø–∏—Å–æ–∫
                    </button>
                </div>
                
                <input type="text" class="search-box" id="searchResults" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏...">
                
                <div class="sort-controls">
                    <span>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
                    <select class="sort-select" id="sortResults">
                        <option value="date-desc">–ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                        <option value="date-asc">–ü–æ –¥–∞—Ç–µ (—Å—Ç–∞—Ä—ã–µ —Å–Ω–∞—á–∞–ª–∞)</option>
                        <option value="name">–ü–æ –∏–º–µ–Ω–∏</option>
                        <option value="status">–ü–æ —Å—Ç–∞—Ç—É—Å—É</option>
                    </select>
                </div>
            </div>
            
            <div class="results-content">
                <div class="grid-view" id="resultsView">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modal for Delete Confirmation -->
<div class="modal" id="deleteModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
            <button id="closeModal" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
        </div>
        <div class="modal-body">
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é <strong id="deleteDirName"></strong>?</p>
            <p style="color: #e74c3c; margin-top: 1rem;">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ.</p>
        </div>
        <div class="modal-footer">
            <button class="action-btn btn-cancel" id="cancelDelete">–û—Ç–º–µ–Ω–∞</button>
            <button class="action-btn btn-confirm" id="confirmDelete">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const resultsView = document.getElementById('resultsView');
        const viewBtns = document.querySelectorAll('.view-btn');
        const searchResults = document.getElementById('searchResults');
        const sortResults = document.getElementById('sortResults');
        const refreshBtn = document.getElementById('refreshBtn');
        const cleanupBtn = document.getElementById('cleanupBtn');
        const deleteModal = document.getElementById('deleteModal');
        const closeModal = document.getElementById('closeModal');
        const cancelDelete = document.getElementById('cancelDelete');
        const confirmDelete = document.getElementById('confirmDelete');
        const deleteDirName = document.getElementById('deleteDirName');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentView = 'grid';
        let currentSearch = '';
        let currentSort = 'date-desc';
        let resultsData = [];
        let deleteTarget = null;
        
        // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        const sampleResults = [
            {
                id: '2024-01-15_10-23-15',
                name: '2024-01-15_10-23-15',
                date: '2024-01-15 10:23:15',
                status: 'completed',
                metrics: {
                    records: 1000,
                    time: '00:02:30',
                    accuracy: '98.5%',
                    size: '2.4 MB'
                },
                files: [
                    { name: 'report.pdf', size: '1.2 MB', type: 'pdf' },
                    { name: 'data_analysis.json', size: '0.8 MB', type: 'json' },
                    { name: 'visualization.png', size: '0.4 MB', type: 'image' }
                ]
            },
            {
                id: '2024-01-14_15-45-22',
                name: '2024-01-14_15-45-22',
                date: '2024-01-14 15:45:22',
                status: 'completed',
                metrics: {
                    records: 2500,
                    time: '00:05:45',
                    accuracy: '97.2%',
                    size: '5.1 MB'
                },
                files: [
                    { name: 'report.pdf', size: '2.1 MB', type: 'pdf' },
                    { name: 'data_analysis.json', size: '2.8 MB', type: 'json' },
                    { name: 'summary.csv', size: '0.2 MB', type: 'csv' }
                ]
            },
            {
                id: '2024-01-13_09-12-07',
                name: '2024-01-13_09-12-07',
                date: '2024-01-13 09:12:07',
                status: 'error',
                metrics: {
                    records: 500,
                    time: '00:01:15',
                    accuracy: 'N/A',
                    size: '0.8 MB'
                },
                files: [
                    { name: 'error_log.txt', size: '0.1 MB', type: 'txt' },
                    { name: 'partial_data.json', size: '0.7 MB', type: 'json' }
                ]
            },
            {
                id: '2024-01-12_14-33-51',
                name: '2024-01-12_14-33-51',
                date: '2024-01-12 14:33:51',
                status: 'completed',
                metrics: {
                    records: 1500,
                    time: '00:03:20',
                    accuracy: '99.1%',
                    size: '3.2 MB'
                },
                files: [
                    { name: 'report.pdf', size: '1.5 MB', type: 'pdf' },
                    { name: 'data_analysis.json', size: '1.5 MB', type: 'json' },
                    { name: 'charts.zip', size: '0.2 MB', type: 'archive' }
                ]
            },
            {
                id: '2024-01-11_11-05-33',
                name: '2024-01-11_11-05-33',
                date: '2024-01-11 11:05:33',
                status: 'processing',
                metrics: {
                    records: 2000,
                    time: '00:04:10',
                    accuracy: 'N/A',
                    size: '4.1 MB'
                },
                files: [
                    { name: 'temp_data.bin', size: '4.1 MB', type: 'binary' }
                ]
            }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        function initializeResults() {
            resultsData = [...sampleResults];
            renderResults();
        }
        
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function renderResults() {
            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            let filteredData = filterResults(resultsData);
            filteredData = sortResults(filteredData);
            
            // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            resultsView.innerHTML = '';
            
            if (filteredData.length === 0) {
                resultsView.innerHTML = `
                    <div class="empty-results">
                        <div class="empty-results-icon">üìÅ</div>
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
                    </div>
                `;
                return;
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
            filteredData.forEach(result => {
                const cardElement = createResultCard(result);
                resultsView.appendChild(cardElement);
            });
        }
        
        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function filterResults(data) {
            if (!currentSearch) return data;
            
            const searchTerm = currentSearch.toLowerCase();
            return data.filter(result => 
                result.name.toLowerCase().includes(searchTerm) || 
                result.status.toLowerCase().includes(searchTerm)
            );
        }
        
        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function sortResults(data) {
            switch (currentSort) {
                case 'date-desc':
                    return data.sort((a, b) => new Date(b.date) - new Date(a.date));
                case 'date-asc':
                    return data.sort((a, b) => new Date(a.date) - new Date(b.date));
                case 'name':
                    return data.sort((a, b) => a.name.localeCompare(b.name));
                case 'status':
                    return data.sort((a, b) => a.status.localeCompare(b.status));
                default:
                    return data;
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function createResultCard(result) {
            const card = document.createElement('div');
            card.className = 'result-card';
            card.dataset.id = result.id;
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
            let statusText = '';
            let statusClass = '';
            switch (result.status) {
                case 'completed':
                    statusText = '–ó–∞–≤–µ—Ä—à–µ–Ω–æ';
                    statusClass = 'status-completed';
                    break;
                case 'error':
                    statusText = '–û—à–∏–±–∫–∞';
                    statusClass = 'status-error';
                    break;
                case 'processing':
                    statusText = '–í –ø—Ä–æ—Ü–µ—Å—Å–µ';
                    statusClass = 'status-processing';
                    break;
            }
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
            const dateObj = new Date(result.date);
            const formattedDate = dateObj.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            card.innerHTML = `
                <div class="result-header">
                    <div class="result-name">${result.name}</div>
                    <div class="result-status ${statusClass}">${statusText}</div>
                </div>
                <div class="result-body">
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π:</span>
                            <span class="metric-value">${result.metrics.records}</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</span>
                            <span class="metric-value">${result.metrics.time}</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">–¢–æ—á–Ω–æ—Å—Ç—å:</span>
                            <span class="metric-value">${result.metrics.accuracy}</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</span>
                            <span class="metric-value">${result.metrics.size}</span>
                        </div>
                    </div>
                    <div class="files-section">
                        <div style="font-weight: bold; margin-bottom: 0.5rem; color: var(--dark-slate);">–§–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</div>
                        <div class="files-list">
                            ${result.files.map(file => `
                                <div class="file-item">
                                    <div class="file-info">
                                        <div class="file-icon">${getFileIcon(file.type)}</div>
                                        <div>
                                            <div class="file-name">${file.name}</div>
                                            <div class="file-size">${file.size}</div>
                                        </div>
                                    </div>
                                    <div class="file-actions">
                                        <button class="file-action-btn" data-action="preview" data-file="${file.name}">üëÅÔ∏è</button>
                                        <button class="file-action-btn" data-action="download" data-file="${file.name}">üì•</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="action-btn btn-open" data-action="open" data-id="${result.id}">
                        <span>üìÇ</span> –û—Ç–∫—Ä—ã—Ç—å
                    </button>
                    <button class="action-btn btn-download" data-action="download" data-id="${result.id}">
                        <span>üì¶</span> –°–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤
                    </button>
                    <button class="action-btn btn-delete" data-action="delete" data-id="${result.id}">
                        <span>üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            `;
            
            return card;
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
        function getFileIcon(fileType) {
            switch (fileType) {
                case 'pdf': return 'üìÑ';
                case 'json': return 'üìã';
                case 'csv': return 'üìä';
                case 'image': return 'üñºÔ∏è';
                case 'archive': return 'üì¶';
                case 'txt': return 'üìù';
                case 'binary': return 'üî¢';
                default: return 'üìÅ';
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        viewBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                viewBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentView = this.dataset.view;
                resultsView.className = `${currentView}-view`;
            });
        });
        
        searchResults.addEventListener('input', function() {
            currentSearch = this.value;
            renderResults();
        });
        
        sortResults.addEventListener('change', function() {
            currentSort = this.value;
            renderResults();
        });
        
        refreshBtn.addEventListener('click', function() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
            refreshBtn.disabled = true;
            refreshBtn.innerHTML = '<span>‚ü≥</span> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...';
            
            setTimeout(() => {
                initializeResults();
                refreshBtn.disabled = false;
                refreshBtn.innerHTML = '<span>‚Üª</span> –û–±–Ω–æ–≤–∏—Ç—å';
            }, 1000);
        });
        
        cleanupBtn.addEventListener('click', function() {
            if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π?')) {
                // –ò–º–∏—Ç–∞—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                const now = new Date();
                resultsData = resultsData.filter(result => {
                    const resultDate = new Date(result.date);
                    const diffTime = now - resultDate;
                    const diffDays = diffTime / (1000 * 60 * 60 * 24);
                    return diffDays <= 30;
                });
                
                renderResults();
                alert('–°—Ç–∞—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã');
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π)
        resultsView.addEventListener('click', function(e) {
            const actionBtn = e.target.closest('.action-btn, .file-action-btn');
            if (!actionBtn) return;
            
            const action = actionBtn.dataset.action;
            const resultId = actionBtn.dataset.id;
            const fileName = actionBtn.dataset.file;
            
            const result = resultsData.find(r => r.id === resultId);
            
            switch (action) {
                case 'open':
                    openResult(result);
                    break;
                case 'download':
                    downloadResult(result);
                    break;
                case 'delete':
                    showDeleteModal(result);
                    break;
                case 'preview':
                    previewFile(result, fileName);
                    break;
                case 'download-file':
                    downloadFile(result, fileName);
                    break;
            }
        });
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
        function openResult(result) {
            alert(`–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: ${result.name}`);
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Å–º–æ—Ç—Ä—É
        }
        
        function downloadResult(result) {
            alert(`–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏: ${result.name}.zip`);
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞
        }
        
        function showDeleteModal(result) {
            deleteTarget = result.id;
            deleteDirName.textContent = result.name;
            deleteModal.style.display = 'flex';
        }
        
        function previewFile(result, fileName) {
            alert(`–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞: ${fileName}`);
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º
        }
        
        function downloadFile(result, fileName) {
            alert(`–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: ${fileName}`);
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        closeModal.addEventListener('click', function() {
            deleteModal.style.display = 'none';
        });
        
        cancelDelete.addEventListener('click', function() {
            deleteModal.style.display = 'none';
        });
        
        confirmDelete.addEventListener('click', function() {
            if (deleteTarget) {
                resultsData = resultsData.filter(result => result.id !== deleteTarget);
                renderResults();
                deleteModal.style.display = 'none';
                deleteTarget = null;
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.addEventListener('click', function(e) {
            if (e.target === deleteModal) {
                deleteModal.style.display = 'none';
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        initializeResults();
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
    .results-container {
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .results-header {
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--forest-green) 100%);
        color: var(--cream);
        padding: 1.5rem;
        border-radius: 10px 10px 0 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .results-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        background-color: var(--light-gray);
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .view-controls {
        display: flex;
        gap: 0.5rem;
    }
    
    .view-btn {
        padding: 0.5rem 1rem;
        border: 1px solid var(--dark-slate);
        background: white;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .view-btn.active {
        background-color: var(--dark-slate);
        color: white;
    }
    
    .search-box {
        padding: 0.5rem 1rem;
        border: 1px solid var(--dark-slate);
        border-radius: 4px;
        width: 300px;
    }
    
    .sort-controls {
        display: flex;
        gap: 1rem;
        align-items: center;
    }
    
    .sort-select {
        padding: 0.5rem;
        border: 1px solid var(--dark-slate);
        border-radius: 4px;
        background: white;
    }
    
    .results-content {
        display: grid;
        gap: 1.5rem;
        padding: 1.5rem;
        background: white;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–∫–æ–π */
    .grid-view {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 1.5rem;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º */
    .list-view {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .result-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: all 0.3s ease;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    }
    
    .result-header {
        padding: 1rem;
        background-color: var(--cream);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .result-name {
        font-weight: bold;
        color: var(--dark-slate);
        font-size: 1.1rem;
    }
    
    .result-status {
        padding: 0.3rem 0.7rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
    }
    
    .status-completed {
        background-color: var(--forest-green);
        color: white;
    }
    
    .status-error {
        background-color: #e74c3c;
        color: white;
    }
    
    .status-processing {
        background-color: var(--amber);
        color: var(--deep-navy);
    }
    
    .result-body {
        padding: 1.5rem;
    }
    
    .metrics-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
    
    .metric-item {
        display: flex;
        flex-direction: column;
    }
    
    .metric-label {
        font-size: 0.8rem;
        color: var(--dark-slate);
        margin-bottom: 0.25rem;
    }
    
    .metric-value {
        font-weight: bold;
        color: var(--deep-navy);
    }
    
    .result-actions {
        display: flex;
        gap: 0.5rem;
        justify-content: flex-end;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
        padding: 1rem;
        background-color: var(--light-gray);
    }
    
    .action-btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-open {
        background-color: var(--primary-green);
        color: white;
    }
    
    .btn-download {
        background-color: var(--amber);
        color: var(--deep-navy);
    }
    
    .btn-delete {
        background-color: #e74c3c;
        color: white;
    }
    
    .action-btn:hover {
        opacity: 0.9;
        transform: translateY(-2px);
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ */
    .files-list {
        margin-top: 1rem;
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 4px;
        overflow: hidden;
    }
    
    .file-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .file-item:last-child {
        border-bottom: none;
    }
    
    .file-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .file-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--dark-slate);
    }
    
    .file-name {
        font-weight: 500;
        color: var(--deep-navy);
    }
    
    .file-size {
        font-size: 0.8rem;
        color: var(--dark-slate);
    }
    
    .file-actions {
        display: flex;
        gap: 0.5rem;
    }
    
    .file-action-btn {
        background: none;
        border: none;
        cursor: pointer;
        color: var(--dark-slate);
        transition: color 0.3s ease;
    }
    
    .file-action-btn:hover {
        color: var(--forest-green);
    }
    
    .empty-results {
        text-align: center;
        padding: 3rem;
        color: var(--dark-slate);
    }
    
    .empty-results-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--primary-green);
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
    }
    
    .modal-content {
        background: white;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        overflow: hidden;
    }
    
    .modal-header {
        padding: 1.5rem;
        background-color: var(--dark-slate);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .modal-body {
        padding: 1.5rem;
    }
    
    .modal-footer {
        padding: 1rem 1.5rem;
        background-color: var(--light-gray);
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
    }
    
    .btn-cancel {
        background-color: var(--dark-slate);
        color: white;
    }
    
    .btn-confirm {
        background-color: #e74c3c;
        color: white;
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
        .results-controls {
            flex-direction: column;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .search-box {
            width: 100%;
        }
        
        .grid-view {
            grid-template-columns: 1fr;
        }
        
        .metrics-grid {
            grid-template-columns: 1fr;
        }
        
        .result-actions {
            flex-wrap: wrap;
        }
    }
</style>
{% endblock %}
