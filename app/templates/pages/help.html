{% extends "base.html" %}

{% block title %}Страница документации{% endblock %}

{% block hero_title %}Справочная система{% endblock %}
{% block hero_description %}Документация по использованию {{ app_name }} и устранению неисправностей{% endblock %}

{% block content %}
<div class="main__container main__container--with-sidebar">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="sidebar__search">
            <input type="text" class="sidebar__input" id="helpSearch" placeholder="Поиск по документации...">
        </div>
        
        <div class="sidebar__section">
            <h4 class="sidebar__title">Основные разделы</h4>
            <ul class="sidebar__list">
                <li class="sidebar__item">
                    <a href="#json-format" class="sidebar__link sidebar__link--active">Формат JSON</a>
                </li>
                <li class="sidebar__item">
                    <a href="#logs-interpretation" class="sidebar__link">Интерпретация логов</a>
                </li>
                <li class="sidebar__item">
                    <a href="#faq" class="sidebar__link">Частые вопросы (FAQ)</a>
                </li>
                <li class="sidebar__item">
                    <a href="#troubleshooting" class="sidebar__link">Устранение неисправностей</a>
                </li>
            </ul>
        </div>
        
        <div class="sidebar__section">
            <h4 class="sidebar__title">Быстрые ссылки</h4>
            <ul class="sidebar__list">
                <li class="sidebar__item">
                    <a href="#json-structure" class="sidebar__link">Структура JSON</a>
                </li>
                <li class="sidebar__item">
                    <a href="#required-fields" class="sidebar__link">Обязательные поля</a>
                </li>
                <li class="sidebar__item">
                    <a href="#log-levels" class="sidebar__link">Уровни логов</a>
                </li>
                <li class="sidebar__item">
                    <a href="#common-errors" class="sidebar__link">Распространенные ошибки</a>
                </li>
            </ul>
        </div>
    </aside>
    
    <!-- Main Content -->
    <section class="main__content">
        <div class="main__header">
            <h1 class="main__title">Документация {{ app_name }}</h1>
            <p class="main__description">Полное руководство по использованию системы обработки данных</p>
        </div>
        <!-- JSON Format Section -->
        <section class="main__section" id="json-format">
            <h2 class="main__section-title">Формат JSON</h2>
            <div class="main__subsection" id="json-structure">
                <h3 class="main__subsection-title">Структура JSON-файла</h3>
                <p class="main__subsection-text">
                    {{ app_name }} ожидает JSON-файлы с определенной структурой для корректной обработки данных.
                </p>
                
                <div class="code">
<pre class="code__pre"><code class="code__code">{
    "version": "1.0",
    "timestamp": "2024-01-15T10:30:00Z",
    "metadata": {
    "source": "data_generator",
    "description": "Пример набора данных для обработки",
    "data": [
        {
          "id": 1,
          "name": "Пример записи 1",
          "value": 42.5,
          "category": "A",
          "timestamp": "2024-01-15T10:25:00Z"
        }
    ]
}</code></pre>
                </div>
            </div>
            <div class="note" id="required-fields">
                <strong class="note__strong">Примечание:</strong>
                <span class="note__text">Все поля должны соответствовать указанному формату для корректной обработки.</span>
            </div>
        </section>
        
        <!-- Logs Interpretation Section -->
        <section class="main__section" id="logs-interpretation">
            <h2 class="main__section-title">Интерпретация логов</h2>

            <div class="main__subsection" id="log-levels">
                <h3 class="main__subsection-title">Уровни логов</h3>
                <p class="main__subsection-text">
                    DataProcessor использует четыре уровня логирования для информирования о ходе выполнения:
                </p>

                <div class="grid grid--one">
                    <div class="card">
                        <div class="card__content card__content--inline">
                            <span class="card__badge card__badge--green">INFO</span>
                            <strong class="card__label">Информационные сообщения</strong>
                            -
                            <span class="card__description">обычный ход выполнения программы.</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__content card__content--inline">
                            <span class="card__badge card__badge--amber">WARNING</span>
                            <strong class="card__label">Предупреждения</strong>
                            -
                            <span class="card__description">потенциальные проблемы, требующие внимания.</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__content card__content--inline">
                            <span class="card__badge card__badge--red">ERROR</span>
                            <strong class="card__label">Ошибки</strong>
                            -
                            <span class="card__description">критические проблемы, требующие немедленного решения.</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__content card__content--inline">
                            <span class="card__badge card__badge--slate">DEBUG</span>
                            <strong class="card__label">Отладочная информация</strong>
                            -
                            <span class="card__description">детальная информация для разработчиков.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- FAQ Section -->
        <section class="main__section" id="faq">
            <h2 class="main__section-title">Часто задаваемые вопросы (FAQ)</h2>
            <div class="accordion main__subsection">
                <div class="accordion__item">
                    <button class="accordion__trigger">
                        <span class="accordion__title">Какие форматы JSON поддерживаются?</span>
                        <span class="accordion__icon">+</span>
                    </button>
                    <div class="accordion__content">
                        <div class="accordion__body">
                            <p class="accordion__text">{{ app_name }} поддерживает стандартный формат JSON (RFC 8259) с UTF-8 кодировкой.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion__item">
                    <button class="accordion__trigger">
                        <span class="accordion__title">Какой максимальный размер файла можно обработать?</span>
                        <span class="accordion__icon">+</span>
                    </button>
                    <div class="accordion__content">
                        <div class="accordion__body">
                            <p class="accordion__text">Максимальный размер файла: {{ max_file_size_mb }} MB. Для больших файлов рекомендуется использовать потоковую обработку.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion__item">
                    <button class="accordion__trigger">
                        <span class="accordion__title">Как настроить автоматическую обработку файлов?</span>
                        <span class="accordion__icon">+</span>
                    </button>
                    <div class="accordion__content">
                        <div class="accordion__body">
                            <p class="accordion__text">Используйте планировщик задач в настройках системы для настройки автоматической обработки по расписанию.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Troubleshooting Section -->
        <section class="main__section" id="troubleshooting">
            <h2 class="main__section-title">Устранение неисправностей</h2>
            <div class="main__subsection" id="common-errors">
                <h3 class="main__subsection-title">Распространенные ошибки и решения</h3>
                <div class="grid grid--two">
                    <article class="card">
                        <header class="card__header">
                            <h4 class="card__title">Ошибка: "Неверный формат JSON"</h4>
                        </header>
                        <div class="card__content">
                            <div class="card__body">
                                <strong class="card__label">Причина:</strong> 
                                <span class="card__text">Синтаксическая ошибка в JSON-файле.</span>
                            </div>
                            <div class="card__body">
                                <strong class="card__label">Решение:</strong> 
                                <span class="card__text">Проверьте файл с помощью JSON валидатора.</span>
                            </div>
                        </div>
                    </article>

                    <article class="card">
                        <header class="card__header">
                            <h4 class="card__title">Ошибка: "Отсутствует обязательное поле"</h4>
                        </header>
                        <div class="card__content">
                            <div class="card__body">
                                <strong class="card__label">Причина:</strong> 
                                <span class="card__text">В JSON отсутствует одно из обязательных полей.</span>
                            </div>
                            <div class="card__body">
                                <strong class="card__label">Решение:</strong> 
                                <span class="card__text">Убедитесь, что все обязательные поля присутствуют в данных.</span>
                            </div>
                        </div>
                    </article>
                    
                    <article class="card">
                        <header class="card__header">
                            <h4 class="card__title">Ошибка: "Превышен лимит памяти"</h4>
                        </header>
                        <div class="card__content">
                            <div class="card__body">
                                <strong class="card__label">Причина:</strong> 
                                <span class="card__text">Файл слишком большой для обработки.</span>
                            </div>
                            <div class="card__body">
                                <strong class="card__label">Решение:</strong> 
                                <span class="card__text">Разбейте файл на меньшие части или увеличьте лимит памяти.</span>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>
    </section>
</div>

<!-- Back to Top Button -->
<button class="back-to-top" id="backToTop" aria-label="Вернуться наверх">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 19V5M5 12l7-7 7 7"/>
    </svg>
</button>
{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='sidebar/sidebar.js') }}"></script>
    <script src="{{ url_for('static', filename='accordion/accordion.js') }}"></script>
    <script src="{{ url_for('static', filename='back2top/back2top.js') }}"></script>
{% endblock %}

{% block extra_css %}
{% endblock %}
